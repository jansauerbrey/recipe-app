angular.module("app.admin",["ui.router"]).factory("Users",["$resource","BASE_URI",function(e,i){return e(i+"api/admin/user/:id",null,{update:{method:"PUT"}})}]).controller("AdminUserCtrl",["$scope","$state","users","Users",function(e,i,r,s){e.users=r,e.remove=function(i){s.remove({id:i._id},function(){e.users.splice(e.users.indexOf(i),1)})},e.activate=function(i){e.users[e.users.indexOf(i)].is_activated=!0,s.update({id:i._id},{is_activated:!0},function(){})},e.makeAdmin=function(i){e.users[e.users.indexOf(i)].is_admin=!0,s.update({id:i._id},{is_admin:!0},function(){})},e.removeAdmin=function(i){e.users[e.users.indexOf(i)].is_admin=!1,s.update({id:i._id},{is_admin:!1},function(){})}}]).config(["$stateProvider","$urlRouterProvider",function(e,i){e.state("admin",{"abstract":!0,views:{root:{template:"<ui-view />"}},data:{requiresLogin:!0,requiredPermissions:["Admin"],title:"Admin"}}).state("admin.user",{url:"/admin/user",templateUrl:"partials/admin.user.tpl.html",controller:"AdminUserCtrl",resolve:{users:function(e){return e.query().$promise}},data:{title:"Users"}})}]);