angular.module("app.ingredients",["ui.router"]).factory("Ingredients",["$resource","BASE_URI",function(e,t){return e(t+"api/ingredients/:id",null,{update:{method:"PUT"}})}]).factory("TAIngredients",["$resource","BASE_URI",function(e,t){return e(t+"api/typeahead/ingredients/",null,{search:{method:"GET",isArray:!0}})}]).factory("Categories",["$resource","BASE_URI",function(e,t){return e(t+"api/categories/:id",null,{update:{method:"PUT"}})}]).controller("IngredientsController",["$scope","ingredients",function(e,t){e.ingredients=t}]).controller("IngredientDetailCtrl",["$scope","$stateParams","ingredient","Ingredients","categories","$state",function(e,t,r,n,i,a){e.categories=i,e.selectedcategory={},e.ingredient=r,e.selectedcategory.category=r.category,e.selectedcategory.subcategory=r.subcategory,e.selectedcategory.subsubcategory=r.subsubcategory,e.selectedcategory.rewe_cat_id=r.rewe_cat_id,e.update=function(){e.ingredient.category=e.selectedcategory.category,e.ingredient.subcategory=e.selectedcategory.subcategory,e.ingredient.subsubcategory=e.selectedcategory.subsubcategory,e.ingredient.rewe_cat_id=e.selectedcategory.rewe_cat_id,n.update({id:e.ingredient._id},e.ingredient,function(){a.go("admin.ingredients.list")})},e.remove=function(){n.remove({id:e.ingredient._id},function(){a.go("admin.ingredients.list")})},e.save=function(){if(e.newingredient&&!(e.newingredient.length<1)){e.newingredient.category=e.selectedcategory.category,e.newingredient.subcategory=e.selectedcategory.subcategory,e.newingredient.subsubcategory=e.selectedcategory.subsubcategory,e.newingredient.rewe_cat_id=e.selectedcategory.rewe_cat_id;var t=new n(e.newingredient);t.$save(function(){a.go("admin.ingredients.list")})}}}]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("admin.ingredients",{"abstract":!0,url:"/ingredients",template:"<ui-view />",data:{title:"Ingredients"}}).state("admin.ingredients.list",{url:"/list",templateUrl:"partials/ingredients.tpl.html",controller:"IngredientsController",resolve:{ingredients:["Ingredients",function(e){return e.query().$promise}]},data:{name:"Ingredients",icon:"glyphicon glyphicon-apple"}}).state("admin.ingredients.edit",{url:"/edit/:id",templateUrl:"partials/ingredients.details.tpl.html",controller:"IngredientDetailCtrl",resolve:{ingredient:["Ingredients","$stateParams",function(e,t){var r=e.get({id:t.id},function(e){return e}).$promise;return r}],categories:["Categories",function(e){return e.query().$promise}]}}).state("admin.ingredients.add",{url:"/add",templateUrl:"partials/ingredients.add.tpl.html",controller:"IngredientDetailCtrl",resolve:{ingredient:["Ingredients",function(e){var t=new e;return t}],categories:["Categories",function(e){return e.query().$promise}]}})}]);